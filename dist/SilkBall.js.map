{"version":3,"file":"SilkBall.js","sources":["../src/util/debug.js","../src/util/options.js","../src/util/dom.js","../src/util/runEnv.js","../src/util/util.js","../src/SilkBall/init.js","../src/SilkBall/event.js","../src/SilkBall/run.js","../src/SilkBall/trigger.js","../src/index.js"],"sourcesContent":["export function warn(msg){\r\n    console.error(`[SilkBall warn]: ${msg}`)\r\n}\r\n\r\nexport function throwError(msg){\r\n    throw new Error(`[SilkBall warn]: ${msg}`)\r\n}\r\n\r\nexport function log(msg){\r\n    console.log(msg)\r\n}","//默认配置\r\nexport const DEFAULT_OPTIONS = {\r\n    rangeBody : true, //限制的范围 默认为body\r\n    magnet : true, //开启磁吸\r\n    direction  : 'x',//磁吸方向\r\n    margin : 0,//开启磁吸后贴边的边距\r\n    history : false,//关闭记录历史位置\r\n    speed : 500,//惯性速度\r\n    engine : 'js',//磁吸动画模式  js动画/css动画\r\n    cssCubic : 'cubic-bezier(0.21, 1.93, 0.53, 0.64)', //贝塞尔曲线\r\n    jsCubic : 'Bounce_easeOut'\r\n};\r\n//系统配置不可更改\r\nexport const SYSTEM_OPTIONS = {\r\n    momentumLimitDistance : 5,//最小的滑动距离，防止用户触摸点击导致距离偏移，而触发滑动\r\n};","//操作dom\r\nexport function addEvent(el, type, fn) {\r\n    el.addEventListener(type, fn, { passive: false, capture: false })\r\n}\r\nexport function removeEvent(el, type, fn) {\r\n    el.removeEventListener(type, fn, { passive: false, capture: false })\r\n}\r\n\r\nexport function addTransition(el, time ,cub) {\r\n    el.style.transition = `transform ${time}ms ${cub}`\r\n}\r\nexport function clearTransition(el) {\r\n    el.style.transition = 'none';\r\n}\r\n\r\n//判断磁吸的位置\r\nexport function magneTdirection(x,y){\r\n    return x <= y / 2;\r\n} \r\n\r\n//获取元素的位置\r\nexport function getRect(el) {\r\n    return el.getBoundingClientRect()\r\n}\r\n//获取元素的父节点\r\nexport function getParentNode(el) {\r\n    return el.parentNode;\r\n}","//运行的环境\r\nexport const inBrowser = typeof window !== 'undefined'\r\nexport const ua = inBrowser && navigator.userAgent.toLowerCase()\r\nexport const isWeChatDevTools = ua && /wechatdevtools/.test(ua)\r\nexport const isAndroid = ua && ua.indexOf('android') > 0\r\n//当前环境是否支持touch事件\r\nexport const hasTouch = inBrowser && 'ontouchstart' in window;","export function isUndef(v) {\r\n    return v === undefined || v === null;\r\n}\r\n\r\nexport const requestAnimationFrame = (() => {\r\n    return window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n        window.oRequestAnimationFrame ||\r\n        function (callback) {\r\n            return window.setTimeout(callback, 100 / 60)\r\n        }\r\n})()\r\n\r\n//获取当前时间\r\nexport function getNow() {\r\n    return window.performance && window.performance.now ? (window.performance.now() + window.performance.timing.navigationStart) : +new Date()\r\n}\r\n\r\n//判断是否是数字\r\nexport function isNumber(v){\r\n    return typeof v === 'number'\r\n}\r\n\r\n/*\r\n    保存历史位置\r\n*/\r\nconst LOCAL_NAME = 'zSilkBall';\r\nexport function saveLocal(local){\r\n    local && localStorage.setItem(LOCAL_NAME,JSON.stringify(local));\r\n}\r\n\r\nexport function getLocal(){\r\n    let local = localStorage.getItem(LOCAL_NAME);\r\n    return JSON.parse(local) || null;\r\n}\r\n\r\n//js实现动画\r\n/*\r\n    t:当前时间\r\n    b :初始值\r\n    c ：变化量\r\n    d：持续时间\r\n*/\r\nexport const Tween = {\r\n    Linear: function (t, b, c, d) {\r\n        return c * t / d + b;\r\n    },\r\n    Quad: {\r\n        easeIn: function (t, b, c, d) {\r\n            return c * (t /= d) * t + b;\r\n        },\r\n        easeOut: function (t, b, c, d) {\r\n            return -c * (t /= d) * (t - 2) + b;\r\n        },\r\n        easeInOut: function (t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t + b;\r\n            return -c / 2 * ((--t) * (t - 2) - 1) + b;\r\n        }\r\n    },\r\n    Cubic: {\r\n        easeIn: function (t, b, c, d) {\r\n            return c * (t /= d) * t * t + b;\r\n        },\r\n        easeOut: function (t, b, c, d) {\r\n            return c * ((t = t / d - 1) * t * t + 1) + b;\r\n        },\r\n        easeInOut: function (t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;\r\n            return c / 2 * ((t -= 2) * t * t + 2) + b;\r\n        }\r\n    },\r\n    Quart: {\r\n        easeIn: function (t, b, c, d) {\r\n            return c * (t /= d) * t * t * t + b;\r\n        },\r\n        easeOut: function (t, b, c, d) {\r\n            return -c * ((t = t / d - 1) * t * t * t - 1) + b;\r\n        },\r\n        easeInOut: function (t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;\r\n            return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\r\n        }\r\n    },\r\n    Quint: {\r\n        easeIn: function (t, b, c, d) {\r\n            return c * (t /= d) * t * t * t * t + b;\r\n        },\r\n        easeOut: function (t, b, c, d) {\r\n            return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\r\n        },\r\n        easeInOut: function (t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;\r\n            return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\r\n        }\r\n    },\r\n    Sine: {\r\n        easeIn: function (t, b, c, d) {\r\n            return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\r\n        },\r\n        easeOut: function (t, b, c, d) {\r\n            return c * Math.sin(t / d * (Math.PI / 2)) + b;\r\n        },\r\n        easeInOut: function (t, b, c, d) {\r\n            return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\r\n        }\r\n    },\r\n    Expo: {\r\n        easeIn: function (t, b, c, d) {\r\n            return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\r\n        },\r\n        easeOut: function (t, b, c, d) {\r\n            return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\r\n        },\r\n        easeInOut: function (t, b, c, d) {\r\n            if (t == 0) return b;\r\n            if (t == d) return b + c;\r\n            if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\r\n            return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\r\n        }\r\n    },\r\n    Circ: {\r\n        easeIn: function (t, b, c, d) {\r\n            return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\r\n        },\r\n        easeOut: function (t, b, c, d) {\r\n            return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\r\n        },\r\n        easeInOut: function (t, b, c, d) {\r\n            if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\r\n            return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\r\n        }\r\n    },\r\n    Elastic: {\r\n        easeIn: function (t, b, c, d, a, p) {\r\n            if (t == 0) return b;\r\n            if ((t /= d) == 1) return b + c;\r\n            if (!p) p = d * .3;\r\n            if (!a || a < Math.abs(c)) {\r\n                a = c;\r\n                var s = p / 4;\r\n            }\r\n            else var s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\r\n        },\r\n        easeOut: function (t, b, c, d, a, p) {\r\n            if (t == 0) return b;\r\n            if ((t /= d) == 1) return b + c;\r\n            if (!p) p = d * .3;\r\n            if (!a || a < Math.abs(c)) {\r\n                a = c;\r\n                var s = p / 4;\r\n            }\r\n            else var s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            return (a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b);\r\n        },\r\n        easeInOut: function (t, b, c, d, a, p) {\r\n            if (t == 0) return b;\r\n            if ((t /= d / 2) == 2) return b + c;\r\n            if (!p) p = d * (.3 * 1.5);\r\n            if (!a || a < Math.abs(c)) {\r\n                a = c;\r\n                var s = p / 4;\r\n            }\r\n            else var s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\r\n            return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;\r\n        }\r\n    },\r\n    Back: {\r\n        easeIn: function (t, b, c, d, s) {\r\n            if (s == undefined) s = 1.70158;\r\n            return c * (t /= d) * t * ((s + 1) * t - s) + b;\r\n        },\r\n        easeOut: function (t, b, c, d, s) {\r\n            if (s == undefined) s = 1.70158;\r\n            return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\r\n        },\r\n        easeInOut: function (t, b, c, d, s) {\r\n            if (s == undefined) s = 1.70158;\r\n            if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\r\n            return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\r\n        }\r\n    },\r\n    Bounce: {\r\n        easeIn: function (t, b, c, d) {\r\n            return c - Tween.Bounce.easeOut(d - t, 0, c, d) + b;\r\n        },\r\n        easeOut: function (t, b, c, d) {\r\n            if ((t /= d) < (1 / 2.75)) {\r\n                return c * (7.5625 * t * t) + b;\r\n            } else if (t < (2 / 2.75)) {\r\n                return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;\r\n            } else if (t < (2.5 / 2.75)) {\r\n                return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;\r\n            } else {\r\n                return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;\r\n            }\r\n        },\r\n        easeInOut: function (t, b, c, d) {\r\n            if (t < d / 2) return Tween.Bounce.easeIn(t * 2, 0, c, d) * .5 + b;\r\n            else return Tween.Bounce.easeOut(t * 2 - d, 0, c, d) * .5 + c * .5 + b;\r\n        }\r\n    }\r\n}\r\n","import {DEFAULT_OPTIONS,SYSTEM_OPTIONS} from '../util/options';\r\nimport {throwError} from '../util/debug';\r\nimport {addEvent,removeEvent,getRect,getParentNode} from '../util/dom'\r\nimport {hasTouch} from '../util/runEnv';\r\nimport {Tween,isNumber,getLocal} from '../util/util';\r\n\r\nexport function initMixin(SilkBall){\r\n    SilkBall.prototype._init = function(options){\r\n        //绑定配置\r\n        this.$options = Object.assign({},DEFAULT_OPTIONS,options);\r\n        this.$system = SYSTEM_OPTIONS;\r\n        //判断动画参数是否存在\r\n        if(this.$options.engine == 'js'){\r\n            let [key,animation] = this.$options.jsCubic.split('_');\r\n            if(Object.keys(Tween).indexOf(key) == -1)   throwError(\"Parameter animation does not exist !\")\r\n            if(!animation)  this.engineAnimation = Tween[key];\r\n            if(!Tween[key][animation]) throwError(\"Parameter animation does not exist !\")\r\n            this.engineAnimation = Tween[key][animation];\r\n        }  \r\n        if(!isNumber(this.$options.speed)) throwError(\"Speed must be numeric !\")\r\n        this.$options.speed = this.$options.speed < 0 ? 0 : this.$options.speed;\r\n        //判定是否开启历史记录位置\r\n        if(this.$options.history){\r\n            let local = getLocal();\r\n            if(local){\r\n                this.moveOldX = local.x;\r\n                this.moveOldY = local.y;\r\n                this._translate(this.moveOldX,this.moveOldY)\r\n            }\r\n        }\r\n        //回调函数\r\n        this._events = {};\r\n        //绑定边距\r\n        this.initBound();\r\n        //绑定事件\r\n        this._addStartEvents();\r\n    }\r\n    //绑定事件\r\n    SilkBall.prototype._addDOMEvents = function(){\r\n        if(hasTouch){\r\n            addEvent(this.$el,'touchmove',this);\r\n            addEvent(this.$el,'touchcancel',this);\r\n            addEvent(this.$el,'touchend',this);\r\n        }\r\n        else{\r\n            addEvent(document,'mousemove',this);//此时的mousemove应该监听在页面上\r\n            addEvent(document,'mousecancel',this);//否则会出现鼠标移动过快而元素不在触发move事件\r\n            addEvent(document,'mouseup',this);\r\n        }\r\n    }\r\n    SilkBall.prototype._addStartEvents = function(){\r\n        if(hasTouch){\r\n            addEvent(this.$el,'touchstart',this);\r\n        }\r\n        else{\r\n            addEvent(this.$el,'mousedown',this);\r\n        }\r\n    }\r\n    //解除绑定事件\r\n    SilkBall.prototype._removeDOMEvents = function () {\r\n        if(hasTouch){\r\n            removeEvent(this.$el,'touchmove',this);\r\n            removeEvent(this.$el,'touchcancel',this);\r\n            removeEvent(this.$el,'touchend',this);\r\n        }\r\n        else{\r\n            removeEvent(document,'mousemove',this);\r\n            removeEvent(document,'mousecancel',this);\r\n            removeEvent(document,'mouseup',this);\r\n        }\r\n    }\r\n    //绑定边界\r\n    SilkBall.prototype.initBound = function () {\r\n        let parNodeReac = getRect(getParentNode(this.$el));\r\n        this.boundMargin = this.$options.rangeBody ? {\r\n            left : 0 + this.$options.margin,\r\n            top : 0 + this.$options.margin,\r\n            right : window.innerWidth - this.$options.margin,\r\n            bottom : window.innerHeight - this.$options.margin\r\n        } : {\r\n            left : parNodeReac.left + this.$options.margin,\r\n            top : parNodeReac.top + this.$options.margin,\r\n            right : parNodeReac.right - this.$options.margin,\r\n            bottom : parNodeReac.bottom - this.$options.margin\r\n        };\r\n        //绑定初始球位置 需要考虑球的历史记录在绑定\r\n        this.elStartBound = getRect(this.$el);\r\n    }\r\n}","import { throwError } from '../util/debug';\r\nimport { isUndef, getNow } from '../util/util'\r\nimport { clearTransition } from '../util/dom'\r\n//处理绑定事件\r\nexport function eventMixin(SilkBall) {\r\n    SilkBall.prototype.handleEvent = function (e) {\r\n        switch (e.type) {\r\n            case 'touchstart':\r\n            case 'mousedown':\r\n                this._start(e);\r\n                break;\r\n            case 'touchmove':\r\n            case 'mousemove':\r\n                this._move(e);\r\n                break;\r\n            case 'touchcancel':\r\n            case 'touchend':\r\n            case 'mousecancel':\r\n            case 'mouseup':\r\n                this._end(e);\r\n                break;\r\n        }\r\n    }\r\n    //滑动开始 \r\n    SilkBall.prototype._start = function (e) {\r\n        if(this.$options.engine != 'js')    clearTransition(this.$el)\r\n        //执行动画起始时间\r\n        this.timerstart = getNow();\r\n        let point = e.touches ? e.touches[0] : e\r\n        //起始位置\r\n        this.startX = point.pageX;\r\n        this.startY = point.pageY;\r\n\r\n        //获取上次移动后的位置\r\n        this.boundX = this.moveOldX || 0 ;\r\n        this.boundY = this.moveOldY || 0 ;\r\n        //判断磁吸动画过程中重新抓取目标应当取消动画磁吸\r\n        this.touching = true;\r\n        this._addDOMEvents();\r\n        this.trigger('touchStart',{\r\n            x : this.boundX,\r\n            y : this.boundY\r\n        })\r\n        e.preventDefault();\r\n    }\r\n    SilkBall.prototype._move = function (e) {\r\n        let point = e.touches ? e.touches[0] : e;\r\n\r\n        let [moveX,moveY] = [point.pageX - this.startX,point.pageY- this.startY];\r\n        let [x,y] = [moveX + this.boundX,moveY + this.boundY];\r\n        \r\n        this._translate(x,y)\r\n\r\n\r\n        //保存当前移动的位置\r\n        this.moveOldX = x;\r\n        this.moveOldY = y;\r\n        \r\n        this.trigger('touchMove',{\r\n            x : this.moveOldX,\r\n            y : this.moveOldY\r\n        })\r\n        e.preventDefault();\r\n    }\r\n    SilkBall.prototype._end = function (e) {\r\n        this.touching = false;\r\n        \r\n        let point = e.touches ? (e.touches[0] ? e.touches[0] : (e.changedTouches ? e.changedTouches[0] : e)) : e;\r\n\r\n        //结束时位置\r\n        let endX = point.pageX;\r\n        let endY = point.pageY;\r\n\r\n        // 移动的水平和垂直距离\r\n        [this.distanceX, this.distanceY] = [endX - this.startX, endY - this.startY];\r\n\r\n        //防止误碰导致惯性\r\n        if (Math.abs(this.distanceX) < this.$system.momentumLimitDistance && Math.abs(this.distanceY) < this.$system.momentumLimitDistance) {\r\n            return;\r\n        }\r\n        //滑动的距离和时间\r\n        [this.distance, this.moveTime] = [Math.sqrt(Math.pow(this.distanceX, 2) + Math.pow(this.distanceY, 2)), getNow() - this.timerstart]\r\n        //速度\r\n        this.speed = this.distance / this.moveTime * 15;\r\n\r\n        //越界反弹方向 反方向为-1\r\n        [this.reverseX, this.reverseY] = [1, 1];\r\n        this.rate = Math.min(10, this.speed);\r\n        this._inertia();\r\n        e.preventDefault();\r\n        this._removeDOMEvents();\r\n    }\r\n    //改变transition 产生移动效果\r\n    SilkBall.prototype._translate = function (x, y) {\r\n        if (isUndef(x) || isUndef(y)) throwError('moving distance cannot be empty!');\r\n        x = Math.round(1000 * x) / 1000;\r\n        y = Math.round(1000 * y) / 1000;\r\n        this.$el.style.transform = `translate3d(${x}px,${y}px,0px)`;\r\n        this.$el.style.webkitTransform = `translate3d(${x}px,${y}px,0px)`;\r\n    }\r\n}","import { requestAnimationFrame ,saveLocal} from '../util/util'\r\nimport { getRect ,addTransition,magneTdirection} from '../util/dom'\r\n//绑定磁吸/惯性事件\r\nexport function runMixin(SilkBall) {\r\n    //算法磁吸\r\n    SilkBall.prototype._algorithmEdge = function () {\r\n         // 初始值 \r\n         let [start,change,during] = [0,0,30];\r\n         // 初始值和变化量\r\n         let [initX,initY] = [ this.moveOldX, this.moveOldY];\r\n         // 判断元素现在在哪个半区\r\n         let bound = getRect(this.$el);\r\n         if(this.$options.direction === 'x'){\r\n            let bean = magneTdirection(bound.left - this.boundMargin.left + bound.width / 2,this.boundMargin.right - this.boundMargin.left)\r\n            if (bean) {\r\n                change = this.boundMargin.left - bound.left;\r\n            } else {\r\n                change = this.boundMargin.right - bound.right;\r\n            }\r\n         }else{\r\n            let bean = magneTdirection(bound.top - this.boundMargin.top + bound.height / 2,this.boundMargin.bottom - this.boundMargin.top)\r\n            if (bean) {\r\n                change = this.boundMargin.top -  bound.top;\r\n            } else {\r\n                change = this.boundMargin.bottom - bound.bottom;\r\n            }\r\n        }\r\n        const run = function () {\r\n            if(this.touching) return\r\n            start++;\r\n            let[x,y] = [initX,initY];\r\n            if(this.$options.direction === 'x'){\r\n                x = this.engineAnimation(start, initX, change, during);\r\n            }else{\r\n                y = this.engineAnimation(start, initY, change, during);\r\n            }\r\n            this._translate(x, y);\r\n\r\n            if (start < during) {\r\n                requestAnimationFrame(run.bind(this));\r\n            } else {\r\n                this.moveOldX = x;\r\n                this.moveOldY = y;\r\n                //监听事件\r\n                this.trigger('touchEnd',{\r\n                    x : this.moveOldX,\r\n                    y : this.moveOldY\r\n                })\r\n                //历史记录\r\n                if(this.$options.history){\r\n                    saveLocal({\r\n                        x : this.moveOldX,\r\n                        y : this.moveOldY\r\n                    })\r\n                }\r\n            }\r\n        };\r\n        run.call(this);\r\n    }\r\n    //css磁吸\r\n    SilkBall.prototype._cssEdge = function(){\r\n        addTransition(this.$el,300,this.$options.cssCubic);\r\n        let bound = getRect(this.$el);\r\n        if(this.$options.direction === 'x'){\r\n            let bean = magneTdirection(bound.left - this.boundMargin.left + bound.width / 2,this.boundMargin.right - this.boundMargin.left)\r\n            if(bean){//贴左侧\r\n                this.moveOldX = this.boundMargin.left-this.elStartBound.left;\r\n                this._translate(this.moveOldX, this.moveOldY)\r\n                \r\n            }\r\n            else{//右侧\r\n                this.moveOldX = this.boundMargin.right - this.elStartBound.left - this.elStartBound.width;\r\n                this._translate(this.moveOldX, this.moveOldY)\r\n            }\r\n        }else{\r\n            let bean = magneTdirection(bound.top - this.boundMargin.top + bound.height / 2,this.boundMargin.bottom - this.boundMargin.top)\r\n            if(bean){//顶部\r\n                this.moveOldY = this.boundMargin.top-this.elStartBound.top;\r\n                this._translate(this.moveOldX, this.moveOldY)\r\n            }\r\n            else{//底部\r\n                this.moveOldY = this.boundMargin.bottom - this.elStartBound.top - this.elStartBound.width;\r\n                this._translate(this.moveOldX, this.moveOldY)\r\n            }\r\n        }\r\n        this.trigger('touchEnd',{\r\n            x : this.moveOldX,\r\n            y : this.moveOldY\r\n        })\r\n        if(this.$options.history){\r\n            saveLocal({\r\n                x : this.moveOldX,\r\n                y : this.moveOldY\r\n            })\r\n        }\r\n    }\r\n    //惯性\r\n    SilkBall.prototype._inertia = function () {\r\n        this.speed = this.speed - this.speed / this.rate;\r\n        let inertiaX = this.reverseX * this.speed * this.distanceX * this.$options.speed * 0.00001;\r\n        let inertiaY = this.reverseY * this.speed * this.distanceY * this.$options.speed * 0.00001;\r\n        let bound = getRect(this.$el);\r\n        if (inertiaX < 0 && bound.left + inertiaX < this.boundMargin.left) {\r\n            inertiaX = this.boundMargin.left - bound.left;\r\n            // 碰触边缘方向反转\r\n            this.reverseX *= -1;\r\n        } else if (inertiaX > 0 && bound.right + inertiaX > this.boundMargin.right) {\r\n            inertiaX = this.boundMargin.right - bound.right;\r\n            this.reverseX *= -1;\r\n        }\r\n        if (inertiaY < 0 && bound.top + inertiaY < this.boundMargin.top) {\r\n            inertiaY = this.boundMargin.top - bound.top;\r\n            this.reverseY *= -1;\r\n        } else if (inertiaY > 0 && bound.bottom + inertiaY > this.boundMargin.bottom) {\r\n            inertiaY = this.boundMargin.bottom - bound.bottom;\r\n            this.reverseY *= -1;\r\n        }\r\n        var x = this.moveOldX + inertiaX, y = this.moveOldY + inertiaY;\r\n        \r\n        this._translate(x, y)\r\n        //记录当前小球的位置\r\n        this.moveOldX = x;\r\n        this.moveOldY = y;\r\n        this.trigger('touchMove',{\r\n            x : this.moveOldX,\r\n            y : this.moveOldY\r\n        })\r\n        if (this.speed < 0.1) {\r\n            //考虑磁吸\r\n            if(this.$options.magnet){\r\n                this.$options.engine === 'js' ? this._algorithmEdge() : this._cssEdge();\r\n                return\r\n            }\r\n            \r\n            this.trigger('touchEnd',{\r\n                x : this.moveOldX,\r\n                y : this.moveOldY\r\n            })\r\n        } else {\r\n            requestAnimationFrame(this._inertia.bind(this));\r\n        }\r\n    }\r\n}","import { throwError ,log} from \"../util/debug\";\r\nexport function eventTrigger(SilkBall){\r\n    SilkBall.prototype.on = function(type,fn){\r\n        if(!this._events[type]){\r\n            this._events[type] = [];\r\n        }\r\n        this._events[type].push(fn);\r\n    }\r\n    SilkBall.prototype.trigger = function(type){\r\n        let events = this._events[type];\r\n        if(!events) return\r\n        events.forEach(element => {\r\n            let event = element;\r\n            event && event(...[].slice.call(arguments, 1))\r\n        });\r\n    }\r\n}","import {warn} from './util/debug'\r\nimport {initMixin} from './SilkBall/init';\r\nimport {eventMixin} from './SilkBall/event';\r\nimport {runMixin} from './SilkBall/run';\r\nimport {eventTrigger} from './SilkBall/trigger';\r\nfunction SilkBall(el,options){\r\n    this.$el = typeof el === 'string' ? document.querySelector(el) : el;\r\n    if(!this.$el)   return warn(\"Slide element cannot be empty!\");\r\n    this._init(options)\r\n}\r\n//初始化配置\r\ninitMixin(SilkBall);\r\n//处理绑定事件\r\neventMixin(SilkBall);\r\n//处理磁吸/惯性\r\nrunMixin(SilkBall)\r\n//监听事件回调\r\neventTrigger(SilkBall)\r\nexport default SilkBall;"],"names":["warn","msg","console","error","throwError","Error","DEFAULT_OPTIONS","rangeBody","magnet","direction","margin","history","speed","engine","cssCubic","jsCubic","SYSTEM_OPTIONS","momentumLimitDistance","addEvent","el","type","fn","addEventListener","passive","capture","removeEvent","removeEventListener","addTransition","time","cub","style","transition","clearTransition","magneTdirection","x","y","getRect","getBoundingClientRect","getParentNode","parentNode","inBrowser","window","ua","navigator","userAgent","toLowerCase","isWeChatDevTools","test","isAndroid","indexOf","hasTouch","isUndef","v","undefined","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","getNow","performance","now","timing","navigationStart","Date","isNumber","LOCAL_NAME","saveLocal","local","localStorage","setItem","JSON","stringify","getLocal","getItem","parse","Tween","Linear","t","b","c","d","Quad","easeIn","easeOut","easeInOut","Cubic","Quart","Quint","Sine","Math","cos","PI","sin","Expo","pow","Circ","sqrt","Elastic","a","p","abs","s","asin","Back","Bounce","initMixin","SilkBall","prototype","_init","options","$options","Object","assign","$system","split","key","animation","keys","engineAnimation","moveOldX","moveOldY","_translate","_events","initBound","_addStartEvents","_addDOMEvents","$el","document","_removeDOMEvents","parNodeReac","boundMargin","left","top","right","innerWidth","bottom","innerHeight","elStartBound","eventMixin","handleEvent","e","_start","_move","_end","timerstart","point","touches","startX","pageX","startY","pageY","boundX","boundY","touching","trigger","preventDefault","moveX","moveY","changedTouches","endX","endY","distanceX","distanceY","distance","moveTime","reverseX","reverseY","rate","min","_inertia","round","transform","webkitTransform","runMixin","_algorithmEdge","start","change","during","initX","initY","bound","bean","width","height","run","bind","call","_cssEdge","inertiaX","inertiaY","eventTrigger","on","push","events","forEach","element","event","slice","arguments","querySelector"],"mappings":"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"}